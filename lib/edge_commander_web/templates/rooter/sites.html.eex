<div id="sites_main" v-cloak>
  <div class="m-content">
    <div class="m-portlet m-portlet--mobile" style="margin-bottom: 0">
      <div class="m-portlet__body" style="padding: 10px;">
        <!--begin: Search Form -->
        <div class="m-form m-form--label-align-right m--margin-bottom-10">
          <div class="row align-items-center">
            <div class="col-md-8 order-2 order-md-1">
              <div class="form-group m-form__group row align-items-center">
                <div class="col-md-5">
                  <div class="m-input-icon m-input-icon--left">
                    <input type="text" class="form-control m-input m-input--solid" placeholder="Search..." id="m_form_search" v-model="m_form_search" v-on:keyup="search()">
                    <span class="m-input-icon__icon m-input-icon__icon--left">
                      <span>
                        <i class="la la-search"></i>
                      </span>
                    </span>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4 order-1 order-md-2 m--align-right">
                <a href="#" id="addSite" class="btn btn-primary m-btn m-btn--icon" v-on:click="onSiteButton">
                    <span>
                        <i class="fa fa-plus-square"></i>
                        <span>
                            {{form_labels.add_site_button}}
                        </span>
                    </span>
                </a>
                <div href="#" class="btn btn-default grey" v-on:click="onSiteHideShowButton">
                  <i class="fa fa-columns"></i>
                </div>
            </div>
          </div>
        </div>
        <!--end: Search Form -->
        <table id="sites-datatable" class="table table-striped  table-hover table-bordered datatable display nowrap" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th v-for="(item, index) in headings">{{item.column}}</th>
                </tr>
            </thead>
        </table>
      </div>
    </div>
  </div>
  <!-- end:: modal -->
  <div class="modal fade toggle-datatable-columns" style="padding: 0px;"  tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content" style="padding: 0px;">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                    {{form_labels.hide_show_title}}
                </h5>
                <div class="cancel">
                  <a href="#" id="discardModal" data-dismiss="modal" v-on:click="clearForm">X</a>
                </div>
            </div>
            <div class="modal-body" id="body-sim-dis">
                <div class="form-group">
                  <div class="column-checkbox" v-for="(item, index) in headings">
                      <label class="m-checkbox m-checkbox--single m-checkbox--solid m-checkbox--brand" style="width: auto;"><input type="checkbox" class="sites-column" v-bind:data-id="item.id" v-on:change="showHideColumns(item.id)"><span></span> {{item.column}}</label>
                  </div>
                </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">{{form_labels.hide_show_button}}</button>
            </div>
        </div>
    </div>
  </div>
  <div class="modal fade add_site_to_db" style="padding: 0px;" id="m_modal_1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content" style="padding: 0px;">
              <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                      {{form_labels.add_title}}
                  </h5>
                  <div class="cancel">
                      <a href="#" id="discardModal" data-dismiss="modal" v-on:click="clearForm">X</a>
                  </div>
              </div>
              <div class="modal-body" id="body-site-dis">
                  <img src="/images/loading.gif" id="api-wait" v-if="show_loading">
                  <div id="siteErrorDetails" v-if="show_errors">
                      <div class="form-group m-form__group m--margin-top-10">
                          <div class="alert m-alert m-alert--default" role="alert">
                              <ul id="errorOnSite" style="margin:0px"></ul>
                          </div>
                      </div>
                  </div>
                  <div class="m-form m-form--fit m-form--label-align-left">
                      {{setUserId('<%= @user.id %>')}}
                      <input type="hidden" id="user_id" value="<%= @user.id %>" v-model="user_id">
                      <div class="row">
                              <div class="col-lg-6">
                                  <div class="form-group m-form__group row">
                                      <label class="col-3 col-form-label">
                                          {{form_labels.name}}
                                      </label>
                                      <div class="col-9">
                                          <input type="text" class="form-control m-input m-input--solid" id="name" v-model="name" aria-describedby="emailHelp" placeholder="Site Name">
                                      </div>
                                  </div>
                                  <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.sim}}
                                  </label>
                                  <div class="col-9">
                                      <select class="form-control m-input" id="sim_number" v-model="sim_number">
                                          <%= for sim <- @all_sims do %>
                                              <option value="<%= sim.number %>"><%= sim.number %> &nbsp;<%= sim.name %></option>
                                          <% end %>
                                      </select>
                                  </div>
                                  </div>
                                  <div class="form-group m-form__group row">
                                      <label class="col-3 col-form-label">
                                          {{form_labels.router}}
                                      </label>
                                      <div class="col-9">
                                          <select class="form-control m-input drop-input" id="router_id" v-model="router_id">
                                              <%= for router <- @list_routers do %>
                                                  <option value="<%= router.id %>"><%= router.name %></option>
                                              <% end %>
                                          </select>
                                      </div>
                                  </div>
                                  <div class="form-group m-form__group row">
                                      <label class="col-3 col-form-label">
                                          {{form_labels.nvr}}
                                      </label>
                                      <div class="col-9">
                                          <select class="form-control m-input drop-input" id="nvr_id" v-model="nvr_id">
                                              <%= for nvr <- @list_nvrs do %>
                                                  <option value="<%= nvr.id %>"><%= nvr.name %></option>
                                              <% end %>
                                          </select>
                                      </div>
                                  </div>
                                  <div class="form-group m-form__group row">
                                      <label class="col-3 col-form-label">
                                          {{form_labels.notes}}
                                      </label>
                                      <div class="col-9">
                                          <input type="text" class="form-control m-input m-input--solid" id="notes" v-model="notes" aria-describedby="emailHelp" placeholder="Short Note.">
                                      </div>
                                  </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.latitude}}
                                  </label>
                                  <div class="col-9">
                                      <input name="lat" type="text" class="form-control m-input m-input--solid readonly" id="latitude" readonly>
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.latitude}}
                                  </label>
                                  <div class="col-9">
                                      <input name="lng" type="text" class="form-control m-input m-input--solid readonly" id="longitude" readonly>
                                  </div>
                              </div>
                          </div>
                          <div class="col-lg-6">
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.location}}
                                  </label>
                                  <div class="col-9">
                                     <input type="text" class="form-control m-input m-input--solid" id="map_area" v-model="map_area" aria-describedby="emailHelp" placeholder="Search Location">
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <div class="col-12">
                                     <div id="map_canvas"  style="height:300px;width:100%"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <!--end::Form-->
              </div>
              <div class="modal-footer" style="padding: 11px;">
                  <button type="button" class="btn btn-default" v-on:click="saveModal">
                      {{form_labels.submit_button}}
                  </button>
              </div>
          </div>
      </div>
  </div>
  <div class="modal fade" id="edit_site_to_db" style="padding: 0px;" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content" style="padding: 0px;">
              <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">
                      {{form_labels.edit_title}}
                  </h5>
                  <div class="cancel">
                      <a href="#" id="discardEditModal" data-dismiss="modal" v-on:click="editClearFrom">X</a>
                  </div>
              </div>
              <div class="modal-body" id="body-site-edit-dis">
                   <img src="/images/loading.gif" id="api-wait" v-if="show_loading">
                  <div id="siteEditErrorDetails" v-if="show_edit_errors">
                      <div class="form-group m-form__group m--margin-top-10">
                          <div class="alert m-alert m-alert--default" role="alert">
                              <ul id="errorOnEditSite" style="margin:0px"></ul>
                          </div>
                      </div>
                  </div>
                  <div class="m-form m-form--fit m-form--label-align-left">
                      <input type="hidden" id="user_id" value="<%= @user.id %>" v-model="user_id">
                      <input type="hidden" id="edit_id" v-model="edit_id">
                      <div class="row">
                          <div class="col-lg-6">
                               <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.name}}
                                  </label>
                                  <div class="col-9">
                                      <input type="text" class="form-control m-input m-input--solid" id="edit_name" v-model="edit_name" aria-describedby="emailHelp" placeholder="Site Name">
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.sim}}
                                  </label>
                                  <div class="col-9">
                                      <select class="form-control m-input" id="edit_sim_number" v-model="edit_sim_number">
                                          <%= for sim <- @all_sims do %>
                                              <option value="<%= sim.number %>"><%= sim.number %> &nbsp;<%= sim.name %></option>
                                          <% end %>
                                      </select>
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.router}}
                                  </label>
                                  <div class="col-9">
                                      <select class="form-control m-input drop-input" id="edit_router_id" v-model="edit_router_id">
                                          <%= for router <- @list_routers do %>
                                              <option value="<%= router.id %>"><%= router.name %></option>
                                          <% end %>
                                      </select>
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.nvr}}
                                  </label>
                                  <div class="col-9">
                                      <select class="form-control m-input drop-input" id="edit_nvr_id" v-model="edit_nvr_id">
                                          <%= for nvr <- @list_nvrs do %>
                                              <option value="<%= nvr.id %>"><%= nvr.name %></option>
                                          <% end %>
                                      </select>
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.notes}}
                                  </label>
                                  <div class="col-9">
                                      <input type="text" class="form-control m-input m-input--solid" id="edit_notes" v-model="edit_notes" aria-describedby="emailHelp" placeholder="Short Note.">
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.latitude}}
                                  </label>
                                  <div class="col-9">
                                      <input name="lat" type="text" class="form-control m-input m-input--solid readonly" id="edit_latitude" readonly>
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.longitude}}
                                  </label>
                                  <div class="col-9">
                                      <input name="lng" type="text" class="form-control m-input m-input--solid readonly" id="edit_longitude" readonly>
                                  </div>
                              </div>
                          </div>
                          <div class="col-lg-6">
                              <div class="form-group m-form__group row">
                                  <label class="col-3 col-form-label">
                                      {{form_labels.location}}
                                  </label>
                                  <div class="col-9">
                                     <input type="text" class="form-control m-input m-input--solid" id="edit_map_area" v-model="edit_map_area" aria-describedby="emailHelp" placeholder="Search Location">
                                  </div>
                              </div>
                              <div class="form-group m-form__group row">
                                  <div class="col-12">
                                     <div id="edit_map_canvas" style="height:300px;width:100%"></div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  <!--end::Form-->
              </div>
              <div class="modal-footer" style="padding: 11px;">
                  <button id="" type="button" class="btn btn-default" v-on:click="updateSitedo">
                      {{form_labels.submit_button}}
                  </button>
              </div>
          </div>
      </div>
  </div>
  <!--end::Modal-->
</div>